# Databricks Asset Bundle configuration for Titanic MLOps Pipeline
# Following MLOps Stacks pattern with "Deploy Code" approach

bundle:
  name: titanic-mlops

variables:
  catalog:
    description: "Unity Catalog name"
    default: "mcp-dabs-test"
  schema:
    description: "Schema name for Titanic MLOps"
    default: "titanic_mlops"
  experiment_name:
    description: "MLflow experiment name"
    default: "/Shared/titanic-mlops-${bundle.target}"
  model_name:
    description: "Registered model name"
    default: "titanic_survival_model"

workspace:
  host: https://dbc-cc0aa83c-12fd.cloud.databricks.com

include:
  - resources/*.yml

targets:
  dev:
    mode: development
    default: true
    workspace:
      root_path: /Workspace/Users/${workspace.current_user.userName}/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: mcp-dabs-test
      schema: titanic_mlops_dev

  staging:
    workspace:
      root_path: /Workspace/Shared/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: mcp-dabs-test
      schema: titanic_mlops_staging

  prod:
    workspace:
      root_path: /Workspace/Shared/.bundle/${bundle.name}/${bundle.target}
    variables:
      catalog: mcp-dabs-test
      schema: titanic_mlops_prod
    run_as:
      service_principal_name: "titanic-mlops-sp"
